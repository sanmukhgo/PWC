<!DOCTYPE html>
<html>
<head>
    <link href="https://fonts.googleapis.com/css?family=Josefin+Sans&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Karla&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Montserrat&display=swap" rel="stylesheet">
    <title>Pick Weights Calibrator</title>
    <script src="https://cdn.plot.ly/plotly-1.35.2.min.js"></script>
    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async>
</script>
</head>
<style>
    body,html{
        height: 100%;
        width: 100%;
        margin: 0;
    }

    .heading{
        text-align: center;
        font-family: 'Karla', sans-serif;
        font-size: 170%;
        padding: 8px;
        font-weight: bold;
        color: whitesmoke;
        position: relative;
        background-color:rgb(45, 8, 179);
        box-shadow: 0px 3px 6px #757373;
    }

    .enable{
        margin-left: 2em; 
        font-family: 'Montserrat',sans-serif;;
    }

    .parameter{
        font-family: 'Montserrat',sans-serif;
        font-size: 130%;
        color: rgb(90, 33, 143);
        font-weight: bold;
    }

    .equation{
        font-size: 170%;
    }

    .weight{
        font-weight: bold;
        font-size: 120%;
        font-family: 'Montserrat',sans-serif;
    }

    .container{
        width: 100%;
        height: 35em
    }

    .leftpane{
        width: 23em;
        height: 31em;
        float: left;
        position: relative;
    }

    .inleft{
        width: 100%;
        height: 18%;
        padding-top: 6px;
        padding-left: 6px;
        background-color: #ece9e9;
        box-shadow: 1px 1px 3px #c2bebe;
        margin-left: 10px;
    }
    
    .inleft:hover{
        -webkit-box-shadow:inset 0px 0px 0px 3px black;
        -moz-box-shadow:inset 0px 0px 0px 3px black;
        box-shadow: inset 0px 0px 0px 3px blueviolet;
    }

    .rightpane{
        width: 53em;
        height: 30em;
        position: relative;
        /*float: right;*/
        margin-left: 25em;
        background-color: lightskyblue;
        border-collapse: collapse;
    }

    .switch {
        position: relative;
        display: inline-block;
        width: 40px;
        height: 18px;
    }

    .switch input { 
        opacity: 0;
        width: 0;
        height: 0;
    }

    .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        -webkit-transition: .4s;
        transition: .4s;
    }

    .slider:before {
        position: absolute;
        content: "";
        height: 12px;
        width: 18px;
        left: 3px;
        bottom: 3px;
        background-color: white;
        -webkit-transition: .4s;
        transition: .4s;
    }

    input:checked + .slider {
       background-color: #2196F3;
    }

    input:focus + .slider {
      box-shadow: 0 0 2px #2196F3;
    }

    input:checked + .slider:before {
        -webkit-transform: translateX(15px);
        -ms-transform: translateX(15px);
        transform: translateX(15px);
    }

    .button {
        background-color: #2196F3;
        border: none;
        color: white;
        padding: 5px 10px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 14px;
        margin: 2px 1px;
        cursor: pointer;
    }

    input[type=number] {
        text-align: center;
        width: 20%;
        padding: 4px 5px;
        margin: 2px 0;
        box-sizing: border-box;
        border: 1.5px solid #ccc;
        -webkit-transition: 0.3s;
        transition: 0.3s;
        outline: none;
    }

    input[type=number]:focus {
        border: 3px solid #555;
    }

    input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button { 
        -webkit-appearance: none; 
        margin: 0; 
    }

</style>
<body>
    <div class="heading">
        Pick Weights Calibrator
    </div>
    <div class="container">
        <div class="leftpane">

            <div class="inleft" style="margin-top:16px">
                <form id="form1" class="form">
                    <label>
                        <span class="parameter">
                            Pick before time
                        </span>   
                        <span class="equation">
                            : \(y = \frac{w_1}{1+t}\)
                        </span>
                    </label>
                    <br><br>
                    <label class="weight" for="w1" >
                        w<sub>1</sub> =
                    </label>
                    <input type="number" class="w" id="w1" value="1" />
                    <input type="submit" value="Update" class="button" />
                    <span class="enable">Enable :</span>
                    <label class="switch">
                        <input type="checkbox" class="e" id="e1" onclick="draw()" checked/>
                        <span class="slider"></span>
                    </label>
                </form>
            </div>
            <br>
            <div class="inleft">
                <form id="form2" class="form">
                    <label>
                        <span class="parameter">
                            Rack fulfillability
                        </span>
                        <span class="equation">
                            : \(y = {w_2x}\)
                        </span>
                    </label>
                    <br>
                    <span class="parameter" style="font-size: 90%;font-style: italic;color: brown; ">
                        x=%fulfillability
                    </span>
                    <br>
                    <label class ="weight" for="w2" >
                        w<sub>2</sub> =
                    </label>
                    <input type="number" class="w" id="w2" value="2" />
                    <input type="submit" value="Update" class="button" />
                    <span class="enable">Enable :</span>
                    <label class="switch">
                        <input type="checkbox" class="e" id="e2" onclick="draw()" checked/>
                        <span class="slider"></span>
                    </label>
                </form>
            </div>
            <br>
            <div class="inleft">
                <form id="form3" class="form">
                    <label>
                        <span class="parameter">
                            Client Priority
                        </span>
                        <span class="equation">
                            : \(y = \frac{100-x}{100}w_3\)
                        </span>
                    </label>
                    <br><br>
                    <label class ="weight" for="w3" >
                        w<sub>3</sub> =
                    </label>
                    <input type="number" class="w" id="w3" value="3" />
                    <input type="submit" value="Update" class="button" />
                    <span class="enable">Enable :</span>
                    <label class="switch">
                        <input type="checkbox" class="e" id="e3" onclick="draw()" checked/>
                        <span class="slider"></span>
                    </label>
                </form>
            </div>
            <br>
            <div class="inleft">
                <form id="form4" class="form">
                    <label>
                        <span class="parameter">
                            Distance
                        </span>
                        <span class="equation">
                            : \(y = w_4x\)
                        </span>
                    </label>
                    <br><br>
                    <label class ="weight" for="w4" >
                        w<sub>4</sub> =
                    </label>
                    <input type="number" class="w" id="w4" value="4" />
                    <input type="submit" value="Update" class="button" />
                    <span class="enable">Enable :</span>
                    <label class="switch">
                        <input type="checkbox" class="e" id="e4" onclick="draw()" checked/>
                        <span class="slider"></span>
                    </label>
                </form>
            </div>
            <br>
            <div class="inleft">
                <form id="form5" class="form">
                    <label>
                        <span class="parameter">
                            No. of Racks
                        </span>
                        <span class="equation">
                            : \(y = w_5x\)
                        </span>
                    </label>
                    <br><br>
                    <label class ="weight" for="w5" >
                        w<sub>5</sub> =
                    </label>
                    <input type="number" class="w" id="w5" value="5" />
                    <input type="submit" value="Update" class="button" />
                    <span class="enable">Enable :</span>
                    <label class="switch">
                        <input type="checkbox" class="e" id="e5" onclick="draw()" checked/>
                        <span class="slider"></span>
                    </label>
                </form>
            </div>
        </div>
        <br>
        <div class="rightpane" id="plot"></div>
    </div>

    <script>
        function draw(){
            function fw1(w,x){
                return w/(1+x)
            }
            function fw2(w,x){
                return w*x
            }
            function fw3(w,x){
                return ((100-x)*w)/100
            }
            function fw4(w,x){
                return w*x
            }
            function fw5(w,x){
                return w*x
            }

            function draw(data){
                Plotly.newPlot('plot', data)
            }

            const min=-10
            const max=15
            const step=0.01
            const pts=parseInt((max-min)/step)

            w=document.getElementsByClassName("w");
            e=document.getElementsByClassName("e");

            xVal=[];
            xVal0=[];
            for(i=0;i<=pts;i++){
                xVal[i]=min+step*i;
            }
            for(i=0,j=0;i<=pts;i++){
                if((-10+0.2*i)!=-1){
                    xVal0[j]=min+step*i;
                    j++;
                }
            }

            yVal0=[]
            yVal1=[];
            yVal2=[];
            yVal3=[];
            yVal4=[];
            for(i=0;i<pts;i++){
                yVal0[i]=fw1(w[0].value,xVal0[i])
            }
            for(i=0;i<=pts;i++){
                yVal1[i]=fw2(w[1].value,xVal[i])
            }
            for(i=0;i<=pts;i++){
                yVal2[i]=fw3(w[2].value,xVal[i])
            }
            for(i=0;i<=pts;i++){
                yVal3[i]=fw4(w[3].value,xVal[i])
            }
            for(i=0;i<=pts;i++){
                yVal4[i]=fw5(w[4].value,xVal[i])
            }
            
            trc=[]
            trc[0] = {
                x: xVal0,
                y: yVal0,
                type: 'scatter',
                name: "Pick before Time",
                line: {
                    color: 'rgb(0, 128, 255)',
                    width: 2
                }
            }
            trc[1] = {
                x: xVal,
                y: yVal1,
                type: 'scatter',
                name: "Rack Fulfillability",
                line: {
                    color: 'rgb(255, 102, 51)',
                    width: 2
                }
            }
            trc[2] = {
                x: xVal,
                y: yVal2,
                type: 'scatter',
                name: "Client Priority",
                line: {
                    color: 'rgb(51, 204, 51)',
                    width: 2
                }
            }
            trc[3] = {
                x: xVal,
                y: yVal3,
                type: 'scatter',
                name: "Distance",
                line: {
                    color: 'rgb(204, 41, 0)',
                    width: 2
                }
            }
            trc[4] = {
                x: xVal,
                y: yVal4,
                type: 'scatter',
                name: "No. of Rack",
                line: {
                    color: 'rgb(153, 0, 153)',
                    width: 2
                }
            }

            trace=[]
            for(i=0;i<5;i++)
                if(e[i].checked)
                    trace.push(trc[i]);

            data = trace;
            layout = {
                legend: {
                    traceorder: 'normal',
                    font: {
                        family: 'Josefin sans',
                        size: 14,
                        color: '#000'
                    },
                    bgcolor: '#E2E2E2'
                },
                xaxis: {
                    title: "x",
                    titlefont: { 
                            family: 'Courier New, monospace',
                            size: 30,
                            color: '#7f7f7f'
                        },
                    linecolor: 'black',
                    linewidth: 2,
                    mirror: true
                },
                yaxis: {
                    title: "y",
                    titlefont: { 
                            family: 'Courier New, monospace',
                            size: 25,
                            color: '#7f7f7f'
                        },
                    linecolor: 'black',
                    linewidth: 2,
                    mirror: true
                }
            };

            Plotly.newPlot('plot',data,layout);
        }

        form=document.getElementsByClassName('form');
        for(i=0;i<5;i++){
            form[i].onsubmit = function(event) {
                event.preventDefault();
                draw();
            }
        }
        draw()       
    </script>
</body>
</html>
